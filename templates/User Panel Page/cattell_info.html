<!DOCTYPE html>
<html lang="fa">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" type="x-icon" href="{{ url_for('static', filename='images/mind_9548035.png') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>شروع آزمون کتل</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/persian-datepicker@latest/dist/css/persian-datepicker.min.css">
    <script src="https://unpkg.com/persian-date@latest/dist/persian-date.min.js"></script>
    <script src="https://unpkg.com/persian-datepicker@latest/dist/js/persian-datepicker.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/start.css') }}" />
    <style>
      body {
        direction: rtl;
      }

      @font-face {
        font-family: "Anjomanweb VF";
        src: url("{{ url_for('static', filename='src/AnjomanwebGX.woff') }}") format("woff-variations"),
          url("{{ url_for('static', filename='src/AnjomanwebGX.woff') }}") format("woff");
        font-display: fallback;
      }

      * {
        font-family: "Anjomanweb VF";
      }
    </style>
  </head>

  <body>
    <div class="container py-3">
      <div class="container row">
        <div class="col-md-6 col-lg-8 col-sm-12">
          <h2 class="mt-5">پرسشنامه شخصیت کتل (16PF)</h2>
          <div class="mt-5">
            <div>
              <p class="opacity-50">توضیحات:</p>
            </div>
            <p>
              پرسشنامه شخصیت کتل شامل ۱۶ عامل اصلی شخصیت است که به ارزیابی جنبه‌های مختلف شخصیت افراد می‌پردازد. این آزمون به شما کمک می‌کند تا نگاهی جامع‌تر به ویژگی‌های شخصیتی خود داشته باشید.
            </p>
            <p>
              این پرسشنامه استاندارد بوده و در سطح جهانی برای ارزیابی شخصیت افراد مورد استفاده قرار می‌گیرد. تکمیل پرسشنامه حدود ۲۰ تا ۲۵ دقیقه زمان می‌برد.
            </p>
            <p>
              این آزمون برای افراد بزرگسال و نوجوانان طراحی شده است و به شناسایی خصوصیات روانشناختی مختلف فرد کمک می‌کند.
            </p>
          </div>
        </div>
        <div
          class="col-md-6 col-lg-4 col-sm-12 text-center d-flex justify-content-center align-items-center"
        >
          <img
            class="d-none d-md-block"
            style="width: 50%"
            src="{{ url_for('static', filename='images/brain-logo-085FB58CDA-seeklogo.com.png') }}"
          />
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col">
          <div>
            <p class="opacity-50">دسته بندی:</p>
          </div>
          <p class="fs-4">بزرگسالان و نوجوانان</p>
        </div>
        <div class="col">
          <div>
            <p class="opacity-50">تعداد سوالات:</p>
          </div>
          <p class="fs-4">184</p>
        </div>
        <div class="col">
          <div>
            <p class="opacity-50"> گروه سنی :</p>
          </div>
          <p class="fs-4">بزرگسالان و نوجوانان ۱۴ سال به بالا</p>
        </div>
      </div>
    </div>

    <div id="demo" class="collapse container my-3">
      <form action="{{ url_for('take_cattell') }}" method="POST" class="form">
        <div class="row">
          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="fname" class="form-label">نام :</label>
            <input
              type="text"
              class="form-control"
              id="fname"
              name="fname"
              required
              placeholder="نام خود را وارد کنید"
            />
          </div>
          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="lname" class="form-label">نام خانوادگی :</label>
            <input
              type="text"
              class="form-control"
              id="lname"
              name="lname"
              required
              placeholder="نام خانوادگی خود را وارد کنید"
            />
          </div>
          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="gender" class="form-label">جنسیت:</label>
            <select name="gender" id="gender" class="form-select" required>
              <option value="male">مرد</option>
              <option value="female">زن</option>
            </select>
          </div>
          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="home" class="form-label">استان محل سکونت :</label>
            <input
              type="text"
              class="form-control"
              id="home"
              name="home"
              required
              placeholder="استان خود را وارد کنید"
            />
          </div>

          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="date" class="form-label">تاریخ تولد :</label>
            <input
                type="text"
                class="form-control"
                id="date"
                name="birthdate"
                required
            />
          </div>
          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="education" class="form-label">تحصیلات :</label>
            <select name="education" id="education" class="form-select" required>
              <option value="زیر دیپلم">زیر دیپلم</option>
              <option value="دیپلم">دیپلم</option>
              <option value="لیسانس">لیسانس</option>
              <option value="فوق لیسانس">فوق لیسانس</option>
              <option value="دکترا">دکترا</option>
            </select>
          </div>
          <div class="mb-3 col-sm-12 col-lg-3 col-md-3">
            <label for="email" class="form-label">ایمیل :</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              placeholder="ایمیل خود را وارد کنید"
            />
          </div>
          <button class="btn btn-info btn-lg text-light ok w-100" type="submit">
            تایید
          </button>
        </div>
      </form>
    </div>

    <div class="container d-grid my-3">
      <button
        class="btn btn-info btn-lg text-light"
        data-bs-toggle="collapse"
        data-bs-target="#demo"
        onclick="hidebutt()"
        id="start"
      >
        شروع آزمون
      </button>
    </div>
  </body>

  <script>
    let hide = document.querySelector("#start");

    function hidebutt() {
      hide.className = "hidden";
    }

    $(document).ready(function() {
      var minDate = [1386, 1, 1]; 
      var maxDate = [1400, 12, 29];

      $("#date").pDatepicker({
        format: 'YYYY/MM/DD',
        minDate: minDate,
      });
    });
  </script>
  <script>
    function showLoadingOverlay() {
      const overlay = document.getElementById('loading-overlay');
      overlay.style.opacity = '1'; 
      overlay.style.visibility = 'visible';
    }
  
    function hideLoadingOverlay() {
      const overlay = document.getElementById('loading-overlay');
      overlay.classList.add('fade-out');
  
      setTimeout(() => {
        overlay.style.display = 'none';
      }, 500); }
  
    function setLTRLayout() {
      document.body.style.direction = 'ltr'; 
      document.body.style.textAlign = 'left';
    }
  
    async function translatePage(language) {
const elements = document.querySelectorAll("h1,title, h2, h3,option,label, h4, p, button, a, span, input, textarea");
showLoadingOverlay();

for (let element of elements) {
  if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
    continue;
  }

  let childNodes = Array.from(element.childNodes);

  for (let child of childNodes) {
    if (child.nodeType === Node.TEXT_NODE) {
      let text = child.textContent.trim();

      if (text) {
        const cachedTranslation = localStorage.getItem(`${language}-${text}`);

        if (cachedTranslation) {
          child.textContent = cachedTranslation;
        } else {
          try {
            const response = await fetch("/translate", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                text: text,
                target_language: language,
              }),
            });

            const result = await response.json();

            if (response.ok) {
              child.textContent = result.translated_text;
              localStorage.setItem(`${language}-${text}`, result.translated_text);
            }
          } catch (error) {
            console.error("Error translating text:", error);
          }
        }
      }
    }
  }

  if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
    const placeholderText = element.placeholder;

    if (placeholderText) {
      const cachedPlaceholderTranslation = localStorage.getItem(`${language}-${placeholderText}`);

      if (cachedPlaceholderTranslation) {
        element.placeholder = cachedPlaceholderTranslation;
      } else {
        try {
          const response = await fetch("/translate", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              text: placeholderText,
              target_language: language,
            }),
          });

          const result = await response.json();

          if (response.ok) {
            element.placeholder = result.translated_text;
            localStorage.setItem(`${language}-${placeholderText}`, result.translated_text);
          }
        } catch (error) {
          console.error("Error translating placeholder:", error);
        }
      }
    }
  }
}

setLTRLayout(); 
hideLoadingOverlay(); 
}

  
    function checkLanguageInSlug() {
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('lang')) {
        const language = urlParams.get('lang');
        translatePage(language);
      } else {
        hideLoadingOverlay();
      }
    }
  
    window.onload = checkLanguageInSlug;
  </script>
  
  <style>
    #loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 1;
      transition: opacity 0.5s ease;
    }
  
    #loading-spinner {
      position: absolute;
    }
  
    .fade-out {
      opacity: 0;
      visibility: hidden;
    }
  </style>
  
<div id="loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: white; z-index: 9999;">
<div id="loading-spinner" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
</div>

</html>
