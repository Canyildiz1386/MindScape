<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" type="x-icon" href="{{ url_for('static', filename='src/mind_9548035.png') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>روان افرا</title>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='src/css/bootstrap.rtl.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Home-style.css') }}" />
    <link href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.6.6/css/flag-icons.min.css" rel="stylesheet"/>
  
    <style>
      @font-face {
        font-family: "Anjomanweb VF";
        src: url("{{ url_for('static', filename='src/AnjomanwebGX.woff') }}") format("woff-variations"),
          url("{{ url_for('static', filename='src/AnjomanwebGX.woff') }}") format("woff");
        font-display: fallback;
      }
      * {
        font-family: "Anjomanweb VF";
      }
      .dropdown-item .fi {
        margin-right: 8px;
        font-size: 1.2rem;
      }
    </style>
  </head>
  <body>
    <header class="container-fluid bg-black">
      <section class="container">
        <nav class="navbar navbar-expand-lg navbar-light">
          <button class="navbar-toggler border border-2" data-toggle="collapse" data-target="#myNav">
            <i class="fas fa-bars text-white fa-lg"></i>
          </button>
          <div class="collapse navbar-collapse mt-4" id="myNav">
            <ul class="navbar-nav list-unstyled my-3 my-md-0">
              <li class="nav-item mx-2">
                <a href="" class="nav-link active text-white">صفحه اصلی</a>
              </li>
              <li class="nav-item mx-2 dropdown">
                <a href="" class="nav-link dropdown-toggle text-white" data-toggle="dropdown">زبان</a>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="?lang=en"><span class="fi fi-gb"></span> English</a>
                  <a class="dropdown-item" href="/"><span class="fi fi-ir"></span> فارسی</a>
                  <a class="dropdown-item" href="?lang=fr"><span class="fi fi-fr"></span> Français</a>
                </div>
              </li>
              <li class="nav-item mx-2 dropdown">
                <a href="" class="nav-link dropdown-toggle text-white" data-toggle="dropdown">دسترسی سریع</a>
                <div class="dropdown-menu">
                  <a href="#akhenbach" class="dropdown-item"> آزمون آکنباخ</a>
                  <a href="#cattell" class="dropdown-item">آزمون کتل</a>
                  <a href="#about" class="dropdown-item"> درباره ما</a>
                  <a href="#contact" class="dropdown-item">ارتباط با ما</a>
                </div>
              </li>
              <li class="nav-item mx-2">
                <a href="" class="nav-link text-white">درباره ما</a>
              </li>
            </ul>
          </div>
          {% if current_user.is_authenticated %}
            <a href="{{ url_for('user_panel') }}" class="btn mt-1 mt-md-4 reg-btn text-white">
              سلام، {{ current_user.username }}
            </a>
          {% else %}
            <button type="button" class="btn mt-1 mt-md-4 reg-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
              ورود / ثبت نام
            </button>
          {% endif %}
        </nav>
      </section>
      <section class="container mt-4">
        <div class="row pt-5">
          <div class="col-12 col-lg-6 text-white">
            <h1><span class="site-name">روان افرا</span></h1>
            <p class="banner-text">
              در روان افرا، ما متعهد به بهبود سلامت روانی و شناختی شما هستیم. با استفاده از آزمون‌های معتبر و استاندارد، همچون آزمون آکنباخ و کتل، می‌توانید وضعیت روحی و شخصیتی خود یا فرزندانتان را بهتر درک کنید. با راهنمایی‌های تخصصی ما، قدم‌های محکم‌تری به سوی ارتقای سلامت روان خود بردارید.
            </p>
          </div>
          <div class="col-lg-6 text-white">
            <img src="{{ url_for('static', filename='src/Art-Brain-Free-PNG-Image.png') }}" alt="" class="d-none d-lg-block" style="width: 100%" />
          </div>
        </div>
      </section>
    </header>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="container mt-3">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
    {% endwith %}
    <div id="akhenbach" class="container mb-5 mt-5">
      <h2 class="text-center m-4">آزمون آخنباخ</h2>
      <div class="row text-white">
        <div class="col-12">
          <div class="card h-100 rounded-4 bg-dark">
            <div class="card-body">
              <h2 class="card-title mb-4 text-center">آزمون آخنباخ</h2>
              <p class="card-text">
                آزمون آخنباخ ابزاری معتبر برای ارزیابی رفتارهای عاطفی و اجتماعی کودکان و نوجوانان است. این آزمون به متخصصان روانشناسی کمک می‌کند تا مشکلات احتمالی مانند اضطراب، افسردگی، و مشکلات توجه را تشخیص دهند و راهکارهای مناسبی برای درمان یا مدیریت آنها ارائه دهند.
              </p>
              <p class="card-text">
                آزمون آخنباخ به والدین، مربیان، و متخصصان این امکان را می‌دهد که با دقت بیشتری به رفتارهای کودکان و نوجوانان نگاه کرده و در صورت نیاز، اقدامات موثری برای بهبود وضعیت روانی و رفتاری آنان انجام دهند.
              </p>
              <a class="btn bg-primary text-white w-100 mt-4" href="{{ url_for('take_akhenbach') }}" role="button">
                شروع آزمون
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="cattell" class="container mb-5 mt-5">
      <h2 class="text-center m-4">آزمون کتل</h2>
      <div class="row text-white">
        <div class="col-12">
          <div class="card h-100 rounded-4 bg-dark">
            <div class="card-body">
              <h2 class="card-title mb-4 text-center">آزمون شخصیت کتل</h2>
              <p class="card-text">
                آزمون شخصیت کتل (16PF) به ارزیابی شخصیت افراد بر اساس 16 عامل شخصیتی مختلف می‌پردازد. این آزمون به روانشناسان و مشاوران کمک می‌کند تا ویژگی‌های شخصیتی فرد را بهتر بشناسند و برنامه‌های درمانی مناسب‌تری ارائه دهند.
              </p>
              <p class="card-text">
                این آزمون در محیط‌های درمانی، مشاوره‌ای و حتی شغلی برای شناخت بهتر افراد و ارتقای توانمندی‌های شخصی و حرفه‌ای آنها به‌کار می‌رود.
              </p>
              <a class="btn bg-primary text-white w-100 mt-4" href="{{ url_for('take_cattell') }}" role="button">
                شروع آزمون
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid description mt-4">
      <div class="d-flex justify-content-around align-items-center p-3">
        <div class="px-1 mt-5 text-white">
          <h3>مزایای استفاده از خدمات ما</h3>
          <p>
            استفاده از آزمون‌های معتبر روانشناسی می‌تواند به شما در درک بهتر از خود یا فرزندانتان کمک کند. با استفاده از این آزمون‌ها، می‌توانید نقاط قوت و ضعف خود را شناسایی کرده و با بهره‌گیری از مشاوره‌های تخصصی، بهبودهایی در زندگی شخصی و حرفه‌ای خود ایجاد کنید. آزمون‌های ما به طور علمی طراحی شده‌اند و به متخصصان کمک می‌کنند تا دقیق‌ترین نتایج را ارائه دهند.
          </p>
        </div>
        <img class="d-none d-md-block purpleBrain" src="{{ url_for('static', filename='images/Untitled-1.png') }}" alt="" />
      </div>
    </div>
    <section class="container-fluid text-white bg-black">
      <div class="row">
        <div class="col-md-6 d-flex align-items-center justify-content-center">
          <img src="{{ url_for('static', filename='src/Untit2.png') }}" alt="" style="width: 75%" class="head-brain d-none d-lg-block" />
        </div>
        <div class="col-12 col-lg-6">
          <div class="row">
            <div class="col my-5 mx-1 text-center">
              <p class="fs-1">
                آیا می‌خواهید وضعیت روانی خود را بهتر درک کنید؟ همین حالا ثبت نام کنید و آزمون‌ها را شروع کنید.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col m-5 text-center">
              <p>برای ادامه ثبت نام کنید</p>
            </div>
          </div>
          <div class="row">
            <div class="col m-5 text-center">
              <button class="btn reg-btn w-75" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                ثبت نام
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
    <div class="container mt-4" id="about">
      <section class="row p-3 d-flex align-items-center">
        <div class="col-12 col-md-8">
          <h3>با ما آشنا شوید</h3>
          <p>
            روان افرا یک پلتفرم تخصصی روانشناسی است که با ارائه آزمون‌های معتبر بین‌المللی، به شما در بهبود وضعیت روانی و شناختی کمک می‌کند. ما تیمی از متخصصان روانشناسی و مشاوره را گرد هم آورده‌ایم تا با تکیه بر دانش و تجربه، بهترین خدمات روان‌شناختی را به شما ارائه دهیم. هدف ما ارتقای سلامت روانی جامعه و ایجاد بستری برای خودآگاهی بیشتر است.
          </p>
        </div>
        <div class="col-12 col-md-4">
          <img class="brain" src="{{ url_for('static', filename='images/Untitled-3.png') }}" alt="" />
        </div>
      </section>
      <section class="row p-3 d-flex align-items-center">
        <div class="col-md-4">
          <img src="{{ url_for('static', filename='images/Untitled-21.png') }}" alt="" class="d-none d-lg-block brain" />
        </div>
        <div class="col-md-8">
          <h3>خدمات ما</h3>
          <p>
            خدمات ما شامل آزمون‌های روانشناسی معتبر، مشاوره‌های تخصصی، و برنامه‌های درمانی شخصی‌سازی شده است. با استفاده از آزمون‌های ما، می‌توانید شناخت عمیق‌تری از خود و وضعیت روانی خود به‌دست آورید. روان افرا با تمرکز بر ارتقای سلامت روان و بهبود کیفیت زندگی افراد، به شما کمک می‌کند تا راه‌های بهتری برای مدیریت استرس، اضطراب و دیگر مشکلات روانی پیدا کنید.
          </p>
        </div>
      </section>
    </div>
    <footer class="container-fluid">
      <div class="row text-white d-flex justify-content-around footer">
        <div class="col-md-4 w-auto p-3 pt-5">
          <h4 class="align-items-center d-flex">
            <i class="fa-sharp-duotone fa-solid fa-link me-1 pe-1" style="font-size: 25px"></i>
            دسترسی سریع
          </h4>
          <ul class="list-unstyled">
            <li class="mt-3 p-2">
              <a href="#akhenbach" class="dropdown-item"> آزمون آخنباخ</a>
            </li>
            <li class="mt-3 p-2"><a href="#cattell" class="dropdown-item">آزمون کتل</a></li>
            <li class="mt-3 p-2">
              <a href="#about" class="dropdown-item"> درباره ما</a>
            </li>
          </ul>
        </div>
        <div class="col-md-4 w-auto mr-5 p-3 pt-5">
          <h4 class="align-items-center d-flex">
            <i class="fa-sharp-duotone fa-solid fa-link me-1 pe-1" style="font-size: 25px"></i>
            ازمون ها
          </h4>
          <ul class="list-unstyled">
            <li class="mt-3 p-2"><a href="{{ url_for('take_akhenbach') }}" class="text-white">شروع آزمون آخنباخ</a></li>
            <li class="mt-3 p-2"><a href="{{ url_for('take_cattell') }}" class="text-white">شروع آزمون کتل</a></li>
          </ul>
        </div>
        <div class="col-md4 pt-5 w-auto" id="contact">
          <h4 class="align-items-center d-flex">
            <i class="fa-sharp-duotone fa-solid fa-link me-1 pe-1" style="font-size: 25px;"></i>
            ارتباط با ما
          </h4>
          <p class="p-2 mt-4">
            <i class="fas fa-envelope"></i>
            can.yildiz.1386@gmail.com
          </p>
          <p class="p-2 mt-4">
            <i class="fa fa-phone" aria-hidden="true"></i>
            +905423106953
          </p>
          <div class="d-flex justify-content-around p-2 mt-2">
            <i class="fab fa-instagram fa-2xl" aria-hidden="true"></i>
            <i class="fab fa-telegram fa-2xl" aria-hidden="true"></i>
            <i class="fab fa-whatsapp fa-2xl" aria-hidden="true"></i>
          </div>
        </div>
      </div>
    </footer>
    <div class="modal fade modal-lg" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content sss">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col text-center mb-3">
                <img src="{{ url_for('static', filename='src/brain-logo-085FB58CDA-seeklogo.com.png') }}" class="text-center" style="width: 20%" />
              </div>
            </div>
            <div class="row">
              <div class="col-12 col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 inputs">
                <form action="{{ url_for('signup') }}" method="POST" class="signin hidden">
                  <div class="row">
                    <div class="col-4 offset-4">
                      <h1 class="modal-title fs-5 text-center modal-title-text staticBackdropLabel">
                        ثبت نام
                      </h1>
                    </div>
                  </div>
                  <input type="text" class="form-control mt-2 inputPlaceHolder" placeholder="نام کاربری" name="username" id="signupUsername" required/>
                  <input type="text" class="form-control mt-2 inputPlaceHolder" placeholder="رمز عبور" name="password" id="signupPassword" required/>
                  <input type="text" class="form-control mt-2 inputPlaceHolder" placeholder="تکرار رمز عبور" name="confirm_password" id="confirmPassword" required/>
                  <button type="submit" class="btn w-100 text-white mt-2 modal-button">
                    ثبت نام
                  </button>
                  <div class="row">
                    <div class="col text-center">
                      <a onclick="GoToLogin()" class="modal-link">حساب کاربری دارید؟ ورود کنید</a>
                    </div>
                  </div>
                </form>
                <form method="POST" action="{{ url_for('login') }}" id="loginform">
                  <div class="row">
                    <div class="col-4 offset-4">
                      <h1 class="modal-title fs-5 text-center modal-title-text staticBackdropLabel">
                        ورود
                      </h1>
                    </div>
                  </div>
                  <input type="text" class="form-control mt-2 inputPlaceHolder" placeholder="نام کاربری" name="username" id="loginUsername" required/>
                  <input type="text" class="form-control mt-2 inputPlaceHolder" placeholder="رمز عبور" name="password" id="loginPassword" required/>
                  <button type="submit" class="btn w-100 text-white mt-5 modal-button">
                    ورود
                  </button>
                  <div class="row">
                    <div class="col text-center">
                      <a onclick="GoToSignin()" class="modal-link">حساب کاربری ندارید؟ ثبت نام کنید</a>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button onclick="topFunction()" id="goToTopBtn" title="Go to Top">
      <i class="fas fa-chevron-up"></i>
    </button>
    <script>
      window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('open_modal')) {
          const myModal = new bootstrap.Modal(document.getElementById('staticBackdrop'));
          myModal.show();
        }
      };
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"></script>
    <script src="{{ url_for('static', filename='src/js/bootstrap.min.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script>
      function showLoadingOverlay() {
        const overlay = document.getElementById('loading-overlay');
        overlay.style.opacity = '1'; 
        overlay.style.visibility = 'visible';
      }
    
      function hideLoadingOverlay() {
        const overlay = document.getElementById('loading-overlay');
        overlay.classList.add('fade-out');
        setTimeout(() => {
          overlay.style.display = 'none';
        }, 500);
      }
    
      function setLTRLayout() {
        document.body.style.direction = 'ltr'; 
        document.body.style.textAlign = 'left';
      }
    
      async function translatePage(language) {
        const elements = document.querySelectorAll("h1,title, h2, h3, h4, p, button, a, span, input, textarea");
        showLoadingOverlay();

        for (let element of elements) {
          if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            continue;
          }

          let childNodes = Array.from(element.childNodes);

          for (let child of childNodes) {
            if (child.nodeType === Node.TEXT_NODE) {
              let text = child.textContent.trim();

              if (text) {
                const cachedTranslation = localStorage.getItem(`${language}-${text}`);

                if (cachedTranslation) {
                  child.textContent = cachedTranslation;
                } else {
                  try {
                    const response = await fetch("/translate", {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify({
                        text: text,
                        target_language: language,
                      }),
                    });

                    const result = await response.json();

                    if (response.ok) {
                      child.textContent = result.translated_text;
                      localStorage.setItem(`${language}-${text}`, result.translated_text);
                    }
                  } catch (error) {
                    console.error("Error translating text:", error);
                  }
                }
              }
            }
          }

          if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            const placeholderText = element.placeholder;

            if (placeholderText) {
              const cachedPlaceholderTranslation = localStorage.getItem(`${language}-${placeholderText}`);

              if (cachedPlaceholderTranslation) {
                element.placeholder = cachedPlaceholderTranslation;
              } else {
                try {
                  const response = await fetch("/translate", {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                      text: placeholderText,
                      target_language: language,
                    }),
                  });

                  const result = await response.json();

                  if (response.ok) {
                    element.placeholder = result.translated_text;
                    localStorage.setItem(`${language}-${placeholderText}`, result.translated_text);
                  }
                } catch (error) {
                  console.error("Error translating placeholder:", error);
                }
              }
            }
          }
        }

        setLTRLayout(); 
        hideLoadingOverlay(); 
      }

      function checkLanguageInSlug() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('lang')) {
          const language = urlParams.get('lang');
          translatePage(language);
        } else {
          hideLoadingOverlay();
        }
      }
    
      window.onload = checkLanguageInSlug;

      let goToTopBtn = document.getElementById("goToTopBtn");

      window.onscroll = function() {
        scrollFunction();
      };

      function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
          goToTopBtn.style.display = "block";
        } else {
          goToTopBtn.style.display = "none";
        }
      }

      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }
    </script>
    <style>
      #goToTopBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        border: none;
        outline: none;
        background-color: black;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 10px;
      }

      #goToTopBtn:hover {
        background-color: #555;
      }

      #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 1;
        transition: opacity 0.5s ease;
      }

      #loading-spinner {
        position: absolute;
      }

      .fade-out {
        opacity: 0;
        visibility: hidden;
      }
    </style>
    <div id="loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: white; z-index: 9999;">
      <div id="loading-spinner" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
    <script src="{{ url_for('static', filename='js/file.js') }}"></script>
  </body>
</html>
